
{% extends "layout.html" %}

{% block pageTitle %}
  Home â€“ GOV.UK Land Access Request Service
{% endblock %}
{% block content %}
{% include 'includes/head.html' %}
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
<style>
  a:link, .govuk-link:link {
    color: #00A33B !important;
}
  .modal-confirm {		
	color: #636363;
	width: 400px;
}
.modal-confirm .modal-content {
	padding: 20px;
	border-radius: 5px;
	border: none;
	text-align: center;
	font-size: 14px;
}
.modal-confirm .modal-header {
	border-bottom: none;   
	position: relative;
}
.modal-confirm h4 {
	text-align: center;
	font-size: 26px;
	margin: 30px 0 -10px;
}
.modal-confirm .close {
	position: absolute;
	top: -5px;
	right: -2px;
}
.modal-confirm .modal-body {
	color: #999;
}
.modal-confirm .modal-footer {
	border: none;
	text-align: center;		
	border-radius: 5px;
	font-size: 13px;
	padding: 10px 15px 25px;
}
.modal-confirm .modal-footer a {
	color: #999;
}		
.modal-confirm .icon-box {
	width: 80px;
	height: 80px;
	margin: 0 auto;
	border-radius: 50%;
	z-index: 9;
	text-align: center;
	border: 3px solid #f15e5e;
}
.modal-confirm .icon-box i {
	color: #f15e5e;
	font-size: 46px;
	display: inline-block;
	margin-top: 13px;
}
.modal-confirm .btn, .modal-confirm .btn:active {
	color: #fff;
	border-radius: 4px;
	background: #60c7c1;
	text-decoration: none;
	transition: all 0.4s;
	line-height: normal;
	min-width: 120px;
	border: none;
	min-height: 40px;
	border-radius: 3px;
	margin: 0 5px;
}
.modal-confirm .btn-secondary {
	background: #c1c1c1;
}
.modal-confirm .btn-secondary:hover, .modal-confirm .btn-secondary:focus {
	background: #a8a8a8;
}
.modal-confirm .btn-danger {
	background: #f15e5e;
}
.modal-confirm .btn-danger:hover, .modal-confirm .btn-danger:focus {
	background: #ee3535;
}
.trigger-btn {
	display: inline-block;
	margin: 100px auto;
}
</style>
<div class="govuk-header__container1"></div>
  

  <div class="govuk-width-container">
        <main class="govuk-main-wrapper " id="main-content" role="main">
          <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-from-desktop">
              <div>
                <a href="search-lars7.html" class="govuk-back-link">Back</a>              
                <div class="govuk-form-group">
                  <fieldset class="govuk-fieldset">
                      <h1 class="govuk-heading-xl">My land parcel batch list</h1>
                      <p class="govuk-caption-xl">Manage your land parcels for your survey and create site permission request</p>
                                   <br>
                                   <br>                            
                    <table class="govuk-table">
                      <thead class="govuk-table__head"> 
                        <p>Showing <span id="rowscount">20</span> of <span id="total">68</span> Land parcels</p>
                        <tr class="govuk-table__row">
                          <th scope="col" class="govuk-table__header" style="width: 4%;padding: 10px 10px 10px 0;">Select</th>
                          <th scope="col" class="govuk-table__header" style="width: 14%;padding: 10px 10px 10px 0;">Land parcel ID</th>
                          <th scope="col" class="govuk-table__header" style="width: 17%;padding: 10px 10px 10px 0;">Primary contact</th>
                          <th scope="col" class="govuk-table__header" style="width: 17%;padding: 10px 10px 10px 0;">Grid reference</th>
                          <th scope="col" class="govuk-table__header" style="width: 17%;padding: 10px 10px 10px 0;">Site permission request reference</th>
                          <th scope="col" class="govuk-table__header" style="width: 17%;padding: 10px 10px 10px 0;">Permission status</th>
                          <th scope="col" class="govuk-table__header" style="width: 17%;padding: 10px 10px 10px 0;">Expiry date</th>

                        </tr>
                      </thead>
                      
                      <tbody class="govuk-table__body"  id="rowslist">
                      </tbody>
                    </table>
                    

                    
                    <nav class="govuk-pagination" role="navigation" aria-label="results">
                      <div class="govuk-pagination__prev">
                        <a class="govuk-link govuk-pagination__link" href="#" rel="prev">
                          <svg class="govuk-pagination__icon govuk-pagination__icon--prev" xmlns="http://www.w3.org/2000/svg" height="13" width="15" aria-hidden="true" focusable="false" viewBox="0 0 15 13">
                            <path d="m6.5938-0.0078125-6.7266 6.7266 6.7441 6.4062 1.377-1.449-4.1856-3.9768h12.896v-2h-12.984l4.2931-4.293-1.414-1.414z"></path>
                          </svg>
                          <span class="govuk-pagination__link-title">Previous</span></a>
                      </div>
                      <ul class="govuk-pagination__list">

                        <li class="govuk-pagination__item govuk-pagination__item--current">
                          <a class="govuk-link govuk-pagination__link" href="#" aria-label="Page 2" aria-current="page">
                            1
                          </a>
                        </li>

                        <li class="govuk-pagination__item">
                          <a class="govuk-link govuk-pagination__link" href="#" aria-label="Page 1">
                            2
                          </a>
                        </li>
                        
                        <li class="govuk-pagination__item">
                          <a class="govuk-link govuk-pagination__link" href="#" aria-label="Page 3">
                            3
                          </a>
                        </li>
                      </ul>
                      <div class="govuk-pagination__next">
                        <a class="govuk-link govuk-pagination__link" href="#" rel="next"> <span class="govuk-pagination__link-title">Next</span> <svg class="govuk-pagination__icon govuk-pagination__icon--next" xmlns="http://www.w3.org/2000/svg" height="13" width="15" aria-hidden="true" focusable="false" viewBox="0 0 15 13">
                            <path d="m8.107-0.0078125-1.4136 1.414 4.2926 4.293h-12.986v2h12.896l-4.1855 3.9766 1.377 1.4492 6.7441-6.4062-6.7246-6.7266z"></path>
                          </svg></a>
                      </div>
                    </nav>  
                    <div class="govuk-button-group" style="display: flex; aligin-items: center">
                      <button href="#myModal" data-toggle="modal" id="remove" aria-disabled="true" class="govuk-button" data-module="govuk-button">
                        Remove land parcels
                      </button>
                      <a  href="search-lars7.html"  class="govuk-button govuk-button--secondary" data-module="govuk-button">
                        Add more land parcels
                      </a>
                     
                      <button class="govuk-button" data-module="govuk-button" style="margin-left: auto;">
                        Create site permission requests
                      </button>
                    </div>

                    
                    
                    </div>
                  </fieldset>
                </div>
            </div>
          </div>
        </main>
      </div>
    

      <!-- Modal HTML -->
<div id="myModal" class="modal fade">
	<div class="modal-dialog modal-confirm">
		<div class="modal-content">
			<div class="modal-header flex-column">
									
				
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
			</div>
			<div class="modal-body">
				<p>Are you sure you want to remove these Land parcels from your batch list?</p>
			</div>
			
      <div class="govuk-button-group modal-footer justify-content-center">
        <button class="govuk-button" data-dismiss="modal" onclick="removelandparcel()" data-module="govuk-button">
          Continue
        </button>
        <a class="govuk-link" data-dismiss="modal" href="javascript:;">Cancel</a>
      </div>
		</div>
	</div>
</div>
  <script>
function shuffle(array) {
  let currentIndex = array.length,  randomIndex;

  // While there remain elements to shuffle.
  while (currentIndex != 0) {

    // Pick a remaining element.
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex--;

    // And swap it with the current element.
    [array[currentIndex], array[randomIndex]] = [
      array[randomIndex], array[currentIndex]];
  }

  return array;
}
    function multiplespr() {
      let count = localStorage.getItem('sprCount');
      console.info(Array.from({length: count}, (v, i) => i));
      let ids = Array.from({length: count}, (v, i) => i);
      let landparcelid = ['AW079A018', 'AY859A852', 'ER125E745', 'MN452C852', 'RT321R452', 'TY456P951'];
      let Primarycontact = ['Alan Harmonie', 'Sacheverell Darla', 'Donald Beam', 'Elora Isla', 'Paisley Sampson', 'Oli Wardell'];
      let address = [
        'TL 08593 23057',
        'TL 08626 23030',
        'TL 08647 22939',
        'TL 08662 22869',
        'TL 09052 23028',
        'TL 09004 22779'
      ];
      let sitepermission = [
        'EES-AGL077542',
        'EA-AGL077542',
        'FR-AGL077542',
        'EPM-AGL077542',
        'LE-AGL077542',
        'EES-WSD657423'
      ];
      let status = ['EXPIRED', 'REQUESTED', 'PRESUMED GRANTED', 'GRANTED', 'To be sent', 'REQUESTED'];
      let expirydate = ['2 March 2022', '10 Jan 2023', '25 Aug 2019', '15 Feb 2023', '5 May 2021', '15 Jan 2023'];
      //shuffle(landparcelid);
     // shuffle(Primarycontact);
     // shuffle(address);
      //shuffle(sitepermission);
      //shuffle(status);
     // shuffle(expirydate);
      var items = ids.map((id, index) => {
      return {
        id: id,
        landparcelid: landparcelid[index],
        Primarycontact: Primarycontact[index],
        address: address[index],
        sitepermission: sitepermission[index],
        status: status[index],
        expirydate: expirydate[index]
      }
    });

    console.info('items........', items)
    let txt = "";
    let txt1 = "";
    let txt2 = "";
      
    sitepermission.forEach(function (item, index) { 
      if(index <= 3) {
        txt += item + "<br>"; 
      }
    });
    let status1 = [
    '<strong class="govuk-tag govuk-tag--blue" style="margin:3px 0">REQUESTED</strong>', 
    '<strong class="govuk-tag govuk-tag--green" style="margin:3px 0">GRANTED</strong>',
    '<strong class="govuk-tag govuk-tag--green" style="margin:3px 0">GRANTED</strong>',
    '<strong class="govuk-tag govuk-tag--turquoise" style="margin:3px 0">PRESUMED GRANTED</strong>',
    '<strong class="govuk-tag govuk-tag--red" style="margin-top:10px">Denied</strong>',
      '', 
      
    ];
    let status2 = [
    '<strong class="govuk-tag govuk-tag--grey" style="margin:3px 0">To be sent</strong>',
    '<strong class="govuk-tag govuk-tag--blue" style="margin-top:20px">REQUESTED</strong>', 
    '<strong class="govuk-tag govuk-tag--green" style="margin-top:25px">GRANTED</strong>',
    '<strong class="govuk-tag govuk-tag--green" style="margin:3px 0">GRANTED</strong>',
    '<strong class="govuk-tag govuk-tag--green" style="margin:3px 0">GRANTED</strong>',
      '', 
      
    ];

    let status3 = [
    '<strong class="govuk-tag govuk-tag--grey" style="margin:3px 0">To be sent</strong>',
    '<strong class="govuk-tag govuk-tag--blue" style="margin:3px 0">REQUESTED</strong>', 
    '<strong class="govuk-tag govuk-tag--green" style="margin-top:20px">GRANTED</strong>',
    '<strong class="govuk-tag govuk-tag--green" style="margin-top:20px">GRANTED</strong>',
    '<strong class="govuk-tag govuk-tag--green" style="margin-top:10px">GRANTED</strong>',
      '', 
      
    ];

    let status4 = [
    '<strong class="govuk-tag govuk-tag--turquoise" style="margin:3px 0">PRESUMED GRANTED</strong>',
    '<strong class="govuk-tag govuk-tag--green" style="margin:3px 0">GRANTED</strong>',
    '<strong class="govuk-tag govuk-tag--blue" style="margin:3px 0">REQUESTED</strong>', 
    '<strong class="govuk-tag govuk-tag--green" style="margin:3px 0">GRANTED</strong>',
    '',
    '', 
      
    ];
    let status5 = [
    '<strong class="govuk-tag govuk-tag--grey" style="margin:3px 0">To be sent</strong>',
    '<strong class="govuk-tag govuk-tag--green" style="margin:3px 0">GRANTED</strong>',
    '<strong class="govuk-tag govuk-tag--green" style="margin:3px 0">GRANTED</strong>',
    '<strong class="govuk-tag govuk-tag--blue" style="margin:3px 0">REQUESTED</strong>', 
    '',
    '', 
      
    ];
    let status6 = [
    '<strong class="govuk-tag govuk-tag--grey" style="margin:3px 0">To be sent</strong>',
    '<strong class="govuk-tag govuk-tag--green" style="margin:3px 0">GRANTED</strong>',
    '<strong class="govuk-tag govuk-tag--green" style="margin:3px 0">GRANTED</strong>',
    '<strong class="govuk-tag govuk-tag--blue" style="margin:3px 0">REQUESTED</strong>', 
    '',
    '', 
      
    ];
    let status7 = [status1, status2, status3, status4, status5, status6]
    
    let expirydate1 = ['<div>None</div>', '<div style="margin-top: 10px">27 March 2025</div>', '<div style="margin-top: 5px">27 March 2025</div>', '<div style="margin-top: 10px">27 March 2025</div>', '<div style="margin-top: 25px">None</div>'];
    let expirydate2 = ['<div>None</div>', '<div style="margin-top: 27px">None</div>', '<div style="margin-top: 23px">27 March 2025</div>', '<div style="margin-top: 10px">27 March 2025</div>', '<div>27 March 2026</div>'];
    let expirydate3 = ['<div>None</div>', '<div style="margin-top: 10px">None</div>', '<div style="margin-top: 20px">27 March 2025</div>', '<div style="margin-top: 20px">27 March 2025</div>', '<div style="margin-top: 10px">27 March 2026</div>'];
    let expirydate4 = ['<div>30 April 2023</div>', '<div style="margin-top: 20px">27 March 2025</div>', '<div style="margin-top: 10px">None</div>', '<div style="margin-top: 10px">27 March 2025</div>'];
    let expirydate5 = ['<div>None</div>', '<div style="margin-top: 8px">27 March 2025</div>', '<div style="margin-top: 8px">27 March 2025</div>', '<div style="margin-top: 8px">None</div>'];
    let expirydate6 = ['<div>None</div>', '<div style="margin-top: 8px">27 March 2025</div>', '<div style="margin-top: 8px">27 March 2025</div>', '<div style="margin-top: 8px">None</div>'];
    let date = [expirydate1, expirydate2, expirydate3, expirydate4, expirydate5, expirydate6]

    let sitepermission1 = [
        '<div><a href="#">EA-FRD864562</a></div>',
        '<div><a href="#">EES-FRD864562</a></div>',
        '<div><a href="#">EPM-FRD864562</a></div>',
        '<div><a href="#">FR-FRD864562</a></div><br>',
        '<div><a href="#">LE-FRD864562</a></div>',
        ''
      ];
      let sitepermission2 = [
        '<div><a href="#">EA-WSD657423</a></div>',
        '<div><a href="#">EES-WSD657423</a></div>',
        '<div><a href="#">EPM-WSD657423</a></div>',
        '<div><a href="#">FR-WSD657423</a></div>',
        '<div style="margin-top: 10px"><a href="#">LE-WSD657423</a></div>',
        ''
      ];
      let sitepermission3 = [
        '<div><a href="#">EA-EDR236574</div>',
        '<div style="margin-top: 10px"><a href="#">EES-EDR236574</a></div>',
        '<div style="margin-top: 15px"><a href="#">EPM-EDR236574</a></div>',
        '<div style="margin-top: 18px"><a href="#">FR-EDR236574</a></div>',
        '<div style="margin-top: 22px"><a href="#">LE-EDR236574</a></div>',
        ''
      ];
      let sitepermission4 = [
        '<div><a href="#">EA-AGL077542</a></div>',
        '<div style="margin-top: 22px"><a href="#">EPM-AGL077542</a></div>',
        '<div style="margin-top: 10px"><a href="#">FR-AGL077542</a></div>',
        '<div style="margin-top: 10px"><a href="#">LE-AGL077542</a></div>',
        '',
        ''
      ];
      let sitepermission5 = [
        '<div><a href="#">EA-ALG420775</a></div>',
        '<div style="margin-top: 8px"><a href="#">EES-ALG420775</a></div>',
        '<div style="margin-top: 8px"><a href="#">EPM-ALG420775</a></div>',
        '<div style="margin-top: 8px"><a href="#">FR-ALG420775</a></div>',
        '',
        ''
      ];
      let sitepermission6 = [
        '<div><a href="#">EA-ALG420775</a></div>',
        '<div style="margin-top: 10px"><a href="#">EES-ALG420775</a></div>',
        '<div style="margin-top: 8px"><a href="#">EPM-ALG420775</a></div>',
        '<div style="margin-top: 8px"><a href="#">FR-ALG420775</a></div>',
        '',
        ''
      ];
      let sitepermission7 = [sitepermission1, sitepermission2, sitepermission3, sitepermission4, sitepermission5, sitepermission6]
     

      document.getElementById('rowscount').innerHTML = count;
      document.getElementById('total').innerHTML = count;
      let x ="";
      items.map((item, i) => { 
        if(item['landparcelid']) {

        
         x = x + '<tr class="govuk-table__row"><td class="govuk-table__cell"><div class="govuk-checkboxes__item"><input class="govuk-checkboxes__input" id="grid_1" name="monad" type="checkbox" onclick="checkboxFunction()"><label class="govuk-label govuk-checkboxes__label" for="grid_1"></label></div></td><td class="govuk-table__cell"><a href="#">'+ item['landparcelid']+'</a></td><td class="govuk-table__cell"><a href="#">'+ item['Primarycontact']+'</a></td><td class="govuk-table__cell">'+ item['address']+'</td><td class="govuk-table__cell">'+sitepermission7[i].join("")+'</td><td class="govuk-table__cell">'+status7[i].join("")+'</td><td class="govuk-table__cell">'+date[i].join("")+'</td></tr>';

        }
         
      })
     
      
      document.getElementById("rowslist").innerHTML = x;
      document.getElementById('remove').disabled = true;
    }
    multiplespr();

    function checkboxFunction() { 
    let checkboxcount = document.querySelectorAll('input[name="monad"]:checked').length;
    if(checkboxcount != 0) {
      document.getElementById('remove').disabled = false;
    } else {
      document.getElementById('remove').disabled = true;
      localStorage.clear();
    }
      
    }
    function removelandparcel() {
      let checkboxcount = document.querySelectorAll('input[name="monad"]:checked').length
      let sprcount = localStorage.getItem('sprCount') - checkboxcount;
      let count = localStorage.setItem('sprCount', sprcount);
      multiplespr();
    }
  </script>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
{% endblock %}
